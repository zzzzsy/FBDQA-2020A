# 第三周学习小结

##  python

类

numpy -package for vector and matrix

scipy- package for scientific and technical computing

matplotlib画图：散点图（scatter plot），line, bar, 3D

pandas:一维数据series;二维数据dataframe

seaborn绘图：基于matplotlib的图形可视化工具，更高层级更简洁，matplotlib更灵活

## 多因子模型

以少为美

### 美股因子分析

* 市场

* 规模（大市值、小市值）

* 价值（高价值：市场上账面市值比（book-to-market ratio)最高前10%）

* 动量（高动量：市场上过去12月总回报即涨幅最高前10%的）

* 风险（低波动：市场上相对于大盘的beta最低的前10%）

* 质量（高质量：市场上利润率最高前10%）

*美股市场上单因子测试中高价值因子最有效，小市值长期跑赢大市值*

*A股市场过去一些年小市值也跑赢大市值，炒小炒烂，价值投资表现不好，短期反转因子好，A股短线参与者多。*

*中美对比产生的区别一是因为政策原因，二是因为投资者结构，美股机构投资者多，A股散户多。说明要适应不同的市场不同的投资者结构，抓住该市场的投资者结构和行为才能抓住该市场的特点赚钱*

**每种因子都有其周期性，都不可能在短时间内跑赢大盘，选择哪个要与投资人的风险承受能力匹配，只有在可靠的投资框架内坚持自己的投资理念，与自己的认知缺陷抗衡，才有可能在长期跑赢大盘**

### 因子检验

* 单因子：一维零投资组合检验（买入一个组合并同时卖空一个组合相当于没花钱）

### 巴菲特的投资密码

**”用平常的价钱买一家很棒（高质量）的公司远远强过用很棒的价钱买一家平常的公司“**

6因子模型解释巴菲特

量化投资策略的多因子框架

## 海龟交易

**典型的趋势型策略**

可视化数据很重要

1. 市场：

   跨市场、高流动性市场：国债、商品、外汇、金属原油...
   
2. 头寸规模：

   定义波动性N：$N=(19*PDN+TR)/20$

   PDN=前一日的N值

   TR=当日的真实波动幅度

   真实波动幅度=Max（H-L,H-PDC,PDC-L)

   H=当日最高价  L=当日最低价  PDC=前一日收盘价

   **头寸规模单位=账户的1%/(N*每一点数所代表的美元)​**

   每一点数所代表的美元>>>每一最小交易单位的资金（1手股票）

3. 头寸规模的进一步限制：风险与头寸单位(限制总风险)

   层面|限制范围|头寸单位上限
   :----:|:-----------:|:----------------:
   1|单个市场|4
   2|高度关联的多个市场|6
   3|松散关联的多个市场|10
   4|单个方向（多头或空头）|12
   
4. 入市信号

   系统1 以20日突破为基础的短期系统（20日新高，现在价格比过去20日最高价还要高，做多，反之做空）

   * 如果上一次突破是一次赢利性突破，则当前的入市信号将被忽略（ 上次赚到钱这次再来一个20日同样级别的突破信号有可能已经接近尾声是假信号避免回吐，风险保障）
   * 55日突破点保障性信号（这个级别更大可以继续做）

   系统2 以55日突破为基础的长期系统

5. 逐步建仓（趋势型策略有个最大特点是加仓）

   在突破点建立一个单位的头寸，按N/2的价格间隔逐步扩大头寸，以上一份订单的实际成交价为基准，直到头寸规模达到上限

6. 止损

   海龟止损标准：任何一笔交易的风险程度不超过账户的2%，价格变动的上限就是2N，对于加仓情况，止损点上浮

7. 退出

   系统1 10日反向突破退出

   系统2 20日反向突破退出（会带来利润回吐的副作用）

**我们能控制的是自己的亏损，定止损，不可胜在己，但市场给多少才能吃多少，可胜在敌**

### 海龟交易法在TB上的实现

### K线图

A股红色空心是涨，实心绿色跌，美股是反的。蜡烛两端是收盘开盘价， 两尖端是最高最低价。量是下面的柱子的高度，成交量越大，柱子越高。

前复权：以今天除权后的价格作为基准，把之前的都调整；

后复权：以上市第一天价格作为基准

看图习惯前复权

### 评估策略指标

最重要：

* 夏普比率：承受每单位的风险所带来的超额回报
* 最大回撤：指在选定周期内任一历史时点往后推，产品净值走到最低点的收益率回撤幅度的最大值（做量化要减小回撤幅度和回撤时间，尤其是后者）


## 趋势跟随型策略(追涨杀跌)

A股以散户为主的投资者结构导致只有风流没有慢流

* 如果趋势延续，就持有头寸，直到趋势完结
* 如果一上来就错了，及时认错止损
