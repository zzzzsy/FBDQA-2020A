[TOC]

# part1 金融基础知识

## 金融学：

### 定义

- 资金融通
- 研究跨期配置稀缺资源的学科

### 分类

- 公司金融-融资
- 资产定价-投资

### 假说和概念

- 基本假设：理性人假说，趋利避害
- 边界条件：资源的稀缺性&制度费用
- 重要概念：选择，机会成本，偏好，效用，信息，预测
- 基本原理：收益与风险的权衡，边际效用递减

## 金融市场与制度

### 金融市场

- 定义：交易金融资产并确定其价格的一种机制
- 功能：资源配置，风险再分配，宏观经济调节
- 分类：股票市场，债卷市场，衍生品市场……
- 参与者：银行，券商，保险，基金，信托，私募……
- 监管机构：央行，证监会，银保监会……

### 金融资产

- 资产
  - 有明确产权的任何物品
  - 资产价格：未来现金流的折现值之和
- 金融资产
  - 现金，股票，债券，期货，期权，基金，外汇，房地产
  - 特点：标准化价格实时变动
- 流动性
  - 资产变现的难易程度及成交价格的变动幅度
  - 现金>债券>基金>股票>房地产
  - 流动性递减，风险递增

### 交易制度

- T+1：第T天买入的股票，第T+1天及以后才能卖出
- 涨跌停：涨跌幅限制10%，ST股票5%，创业板/科创板20%
- 卖空限制：只允许做多，不允许卖空
- 佣金0.025%，印花税0.1%
- 竞价原则：价格优先，时间优先
- 竞价方式：集合竞价，连续竞价
- 上海证券交易所：泸市主板，科创板
- 深圳证券交易所：深市主板，中小板，创业板，新三板
- 股票价格指数：上证综指，泸深300，上证50，中证300等

## 资产定价与投资学

### 资产价格的决定

- 折现现金流模型

### 资产收益率的影响因素

- 债券收益率的主要影响因素：信用和久期
- 股票收益率 = 无风险收益 + 风险溢价
- 模型
  - CAPM单因子模型
  - Fama-French三因子模型
  - Carhat四因子模型
  - Fama-French五因子模型

## CAPM模型


---

# part2 聚宽平台的注册和使用

## 注册

略

## 使用

安装聚宽sdk

```Terminal
pip install jqdatasdk
```
使用本地数据
```python
from jqdatasdk import *
auth(<ID>, <password>)
pd.set_option('display.max_rows', 10)
```
聚宽常用api
```python
get_price() # 获取历史价格数据
getfundamentals() # 查询财务数据

df.pct_change().dropna() # 计算股票收益率，df为价格数据对象
```

---

# part3 量化交易策略开发案例

## 准备

### 为什么选择股票？

### 聚宽编程框架

1. 启动（初始化）
  - `initialize()`初始化策略,设置交易成本，滑点，启动交易实时监测函数`run_daily()`
2. 开盘前
  - `run_daily(pl_before_market_open,time='before_open')`
3. 盘中
  - `run_daily(pl_trade,time='every_bar')`
  - `pl_trade()`
  - `pl_buy()`买入
  - `pl_sell()`卖出
4. 收盘后
  - `run_daily(pl_after_market_close,time='after_close')`
  - `pl_stock_pool`更新股票池，再平衡

### 参数设置

- 回测时间段：20140101-20200920
- 初始资金：1000,0000
- K线时间级别：每天
- 交易逻辑的时间级别：每天/分钟/tick

### 要素

- 胜率/赔率/头寸分配/交易频率/交易成本/资金容量
- 股票选择
- 入市/退出/止损时机

## 股票池

三要素：选股条件，容量，再平衡

- 选股条件
  - PE（反映估值）
  - 市值
  - ROE(反映企业质量)
- 容量
- 再平衡周期：卖出原股票池中的股票，买入新股票池中的股票

## 择时信号

- 基本：追涨杀跌，金叉死叉
- 技术指标：均线型，趋势型，摆动型，能量型
- 