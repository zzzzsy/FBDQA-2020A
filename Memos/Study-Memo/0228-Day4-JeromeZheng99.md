郑扬 2018010228

首先学习了一些基础的金融知识，涉及基本的金融学概念及模型，还有部分实证研究。
量化交易策略开发案例：
海龟交易法则是交易策略最好的入门案例，可以深入研究。关于仓位控制以及加仓，的理解。这节课进入到实操部分。
做量化和金融工程需要实际动手：量化策略大部分时间都是程序化实现且程序化交易。如果是程序化的方式，交易逻辑就要程序化方式实现出来。
交易逻辑如果不去做，很多漏洞和细节没有办法发现。做完逻辑和策略。细节要用程序的方式去验证
量化策略的重点：风险控制的实现、头寸管理的实现、执行的实现。注意股票池，买卖信号。实现程序里是否包含了这些部分。今天只展开讲股票池和择时（买卖信号）
股票池：你要买卖什么；择时，买入卖出信号。这两部分对量化策略最基础的框架就有了。什么时候去买卖。

动手：实现的时候有很多细节，交易逻辑涉及的时候并不能考虑到。均线中，金叉、死叉，怎么定义？写策略的时候，交易信号进来直接就买，可是涨停了呢？这在你的程序里也需要考虑到。特别是如果你要自己搭自己的交易系统，JQ会帮你检验，但你自己的系统你必须自己考虑
平台如何选择：入门平台。目前是JQ，因为股票是一个很好的入门选择。期货期权，杠杆、定价复杂。JQ也好学习。后面来看如果要做期货，可能就不是JQ，要用TB
JQ有一个自己的框架，填空就可以。我的逻辑放在哪个函数里？
你的交易逻辑：你需要一些数据，来用来开盘以后计算。开盘以后，行情数据不断进来，拿到了你要实时计算择时信号，做买卖操作，盘中。盘后，统计仓位情况，调整明天交易的参数
第一个函数：初始化，initialize ，第一个被调用的函数，且只调用一次，运行的只做一次的初始化工作
run_daily,一个函数调用三次，传不同参数实现不同功能。before_open ，指的就是开盘之前。every_bar，每一根K线过来的时候，要执行一次，自动调用一次。after_close, 收盘以后，也要自动调用。
前面的位置可以理解为函数指针

每个tick，如果选了每天，在everybar，只会在开盘调用一次。如果选分钟，every_bar，pl——trade的接口函数，会每分钟调用一次。或者一分钟k线的开始都会调用一次。
对于不同策略类型，关注点是不一样的。胜率：交易十次，几次赚钱，对于趋势型策略，更注重赔率。均值回复策略，要关注胜率。但是头寸分配都是重中之重

股票池：什么是？量化股票池：是一个优质股票集合，但我不现在买，要等一个好的信号进来。股票池和择时信号是一个分工，二者是一个策略的基础

股票池：选股条件？股票市值，再平衡（股票池多长时间调整成分股？），容量，我只要50支，再多就不要了。策略重要的是策略容量
市值<10亿，小的不一定差，加入质量因素

策略刚开始运行的时候执行初始化函数
pl_before_market_open， 盘前做什么事情；pl-trade 盘中；pl_after_market_close
三个函数如何被自动调用？初始化函数，有一定函数借口的定义
run_daily后面第一个跟着的是用户自己定义的函数，pl打头的都是用户自己定义的

set_benchmark: 回测对标沪深300
set_option: 赋权模式，都不用改
log不用管
set_slippage 交易滑点，下一个单保证成交，会以高一点的MV买入，要设置。刚开始写策略不用去动它。实盘策略要去
set_ordr_cost 设置交易成本，平仓开仓手续费等
pl_initial_global 初始化全局变量。里面所有的变量都是g.打头的，定义的变量，JQ上只要是g.名称，就是全局变量

initialize，放的都是和策略全局性相关的，设置完一遍就不用改动的功能

开盘函数：开盘之前 pass
盘中：一般是先卖再买
第一句话：判断是否是再平衡时间 if not g.pl_updated_stock_pool 
接下来sell，再买
有一个头寸判断，要买多少。可用资金，看要买多少支，平均分配资金

先看买：
盘后更新了股票池，是一个全局变量，里面的每一支股票，for 循环，要看是否在持仓股。否则买，下单买函数：order_value(security...买什么买多少

卖：如果这支股票是我的持仓，如果不在我的新股票池里，就要卖出去，卖出股票 order_target，传入股票代码和仓位=0

盘后的交易逻辑：
计算是否到了再平衡时间：全局变量的计数器
pl_trade函数，如果day，每天调用一次；同理pl_after...也是每天调整。计数器，每天+1，

pl_raw_data 
pe ratio字段

pe数据如何获得：拿指标数据都可以套用一个函数，get_fundamentals

择时：什么时候买，什么时候卖

rolling： 算均线，再求平均


















