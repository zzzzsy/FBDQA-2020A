### 课程小结8 周航宇 2017010583
### 本地数据访问-高性能I/O
+ 输入/输出操作
+ python文件操作
~~~python
#打开文件
file=open(file_path,"r") #b,w,r,+
file.close()
#读取函数
with open(file_path,'r') as file:
	for line in file:
		print(line.strip())
#写入函数
with open(new_file_path,'w') as file:
	file.write('test')
~~~
+ pickle写入读取文件
~~~python
import pickle
path='./'
pkl_file =open(path+'data.pkl','wb')
pickle.dump("sdfgsgf",pkl_file)
pkl_file =open(path+'data.pkl','rb')
a=pickle.load(pkl_file)
a
~~~
+ pandas、csv写入文本文件
+ sqlite数据库
#### pandas
+ 读取csv文件——data.to_csv
+ excel——data.to_excel\pd.read_excel
+ 读取数据库——data=pd.read_sql('',con)

### python数学工具
#### 凸优化
+ 全局最小化方法和局部最小化方法
+ 函数 brute函数和fmin函数
+ 在许多凸优化问题中，建议在局部优化之前进行全局优化，主要原因是局部凸优化算法很容易陷入某个局部最小值，而忽略更好的局部最小值和全局最小值。
##### 凸优化——全局优化
+ 通过一个选项输出当前参数值和函数值
+ brute函数以参数范围作为输入
+ 通过给定的函数初始参数化条件得到最优化参数，通过微调达到更好的结果
##### 凸优化——局部优化
+ 利用全局优化的结果
+ fmin函数输入需要最小化的函数和起始参数值
+ 此外可以定义输入参数宽容度和函数值宽容度，以及最大迭代及函数调用次数。
##### 凸优化——有约束优化

#### 逼近法
+ 在给定区间内通过回归和差值求取该函数的近似值
+ 回归和插值
##### 回归
在给定的一组基函数情况下，根据公式找出最优参数
+ 单项式作为基函数
+ 单独的基函数
+ 有噪声的数据
+ 未排序数据
+ 多维
##### 插值
给定一组有序的观测点，基本思路是在两个相邻数据点之间进行回归，不仅产生的分段插值函数完全匹配数据点，而且函数在数据点上连续可微分。

#### 资金管理与量化特征
资金管理的意义
+ 策略的成败的3个核心变量——方向、时机、头寸
#### 确定头寸规模的四种模型
##### 每一固定金额交易一个单位
+ 总资金：一百万
+ 平均分为10份，每份金额：10万
##### 等价值交易单位
+ 总资金：一百万
+ 平均分为10份，每份金额：10万
##### 百分比风险模型
+ 总资金：一百万
+ 总风险：1%
+ 单个交易标的风险：5%
##### 百分比波动幅度模型
+ 总资金：一百万
+ 总风险：1%
+ 单个交易标的风险：3倍ATR
#### 细节考虑——流动性风险
+ 持仓头寸不超过该股票流通市值的2%
+ 日成交量不超过该股票成交量的10%
+ 单日可用资金上限
+ 单个交易标的资金上限
+ 总可用资金上限
#### CPR公式
$$P(头寸规模)=C(总风险)/R(每股风险)$$
##### 总风险
+ 根据个人容忍度确定
+ 基金的强制平仓线
预警线0.9、清盘线0.85
##### 单个头寸的风险
+ 固定风险
+ 波动率
##### 单个头寸与总风险的协调
+ 头寸数量=总风险/单个头寸风险
+ 一次交易资金比例=总风险比率/单个头寸风险比率
##### 最大持仓上限与平均分配风险
+ 最大持仓上限
+ + 一次交易资金比例=总风险比率/单个头寸风险比率
+ + 一次交易资金比例<最大持仓上限
+ 平均分配风险
+ + 预计建仓N个交易标的，按照风险平均分配原则，每个交易标的承担的风险为：总风险/N
+ + 头寸数量=（总风险/N）/单个头寸风险
##### 头寸规模的定期调整——初始风险和持续风险
+ 每隔固定的时间评估当前持仓的持续风险
+ 如果风险暴露大雨总风险，则需要进行减仓
##### 加减仓
+ 价格每上涨一定的幅度（如一个ATR），执行加仓一次
+ 针对加仓部分和原有持仓，根据新的ATR调整为相同的止损位置，降低单位头寸的风险
+ 保证加仓后的风险暴露<总风险
#### 股票池筛选中的避险问题
##### 本福特定律：量化模型发现可疑的操纵痕迹
+ 以1为首位的数字出现机率约为总数的三成，越大的数作为首几位的数出现的概率就越低。
+ 可以根据本福特定律鉴别财务报表数据是否经过人工改造的有利工具
