# 第四堂课总结

**<font size=4> 航71  朱洁松  2017012150</font>**

## 金融基础知识

### 金融基础概念

#### 什么是金融学？

资金融通，研究跨期配置稀缺资源的一门学科。

跨期

> 货币的时间价值--折现率

稀缺性

> 经济性存在的原因--价格

#### 金融学的分类

公司金融和资产定价，此外还有宏观金融、行为金融、金融科技等领域。

公司金融

> 融资--财务会计

资产定价

> 投资--金融工程

#### 金融学假设与概念

基本假设：理性人假说（趋利避害）

边界条件：资源的稀缺性&制度费用

重要概念：选择、机会成本、偏好、效用、信息、预测

基本原理：收益与风险的权衡、边际效用递减

四大理论支柱：有效市场假说、均值方差组合、CAPM模型、期权定价BS公式

### 金融市场和制度

#### 金融市场

金融市场是交易金融资产并确定价格的一种机制。

资源配置、风险再分配、宏观经济调节

分类：直接融资市场、间接融资市场、一级市场（未上市）、二级市场、股票市场、债券市场、衍生品市场

参与者：银行、券商、保险、基金、信托、私募等

监管机构：央行、证监会、银保监会等

#### 金融资产

资产：有明确产权的物品，包括使用权、收入权和转让权。

资产价格：未来现金流的折现之和

金融资产：本身没有使用价值，只是一种获得未来现金流的凭证。特点是标准化、价格实时变动。

流动性：资产变现的难易程度以及成交价格的变动幅度。

流动性顺序：现金>债券>基金>股票>房地产

流动性递减的顺序往往也是风险递增的顺序

#### 交易制度

T+1:第T天买入的股票，第T+1天及以后才能卖出

涨跌停：涨跌幅限制为10%，ST股票5%，创业板/科创板20%

卖空限制：只允许做多，不允许卖空

交易成本：佣金（0.025%）和印花税（0.1%）

竞价原则：价格优先、时间优先

竞价方式：集合竞价、连续竞价

上海证券交易所：沪市主板、科创板

深圳证券交易所：深市主板、中小板、创业板、新三板

>沪市A股票买卖的代码是以600或601打头
>
>深市A股票买卖的代码是以000打头
>
>沪市B股的代码是以900打头
>
>深市B股的代码是以200打头
>
>中小板股票代码以002打头
>
>创业板股票代码以300打头
>

股票价格指数：上证综指、沪深300、上证50、中证500

### 资产定价与投资学

#### 资产价格的决定

折现现金流模型：$p=\sum_{t=1}^n\frac{E(cF_t)}{(1+r)^t}$

$E(cF_t)$代表第t期的预期现金流，r代表折现率

对于债券来说，未来现金流包括票息，本金

对于股票来说，未来现金流主要是股息

不同资产、不同时期的折现率r不一样

#### 资产收益率的主要影响因素

债券：信用和久期

股票收益率 = 无风险收益率 + 风险溢价

CAPM单因素模型：
$$
E(R_t)-R_f=\beta\times[E(RM_t)-R_f]\\
E(R_t)=\alpha+\beta\times[E(RM_t)]
$$
Fama-French三因子模型：加入了size、value

Carhat四因子模型：加入了momentum

Fama-Frech五因子模型：加入了size、value、profit、investment

#### 投资组合理论

前缘资产、CAL曲线

### CAPM模型实证分析

#### 资产选择

选取沪市A股

股价指数选择

数据来源

时间范围

#### 资产收益率

#### 收益率相关性

| 股票 | 均值 | 方差 | 标准差 | 协方差 | 相关系数 |
| ---- | ---- | ---- | ------ | ------  -------- |
|      |      |      |        |                  |
|      |      |      |        |                  |

#### 证券特点线

#### 估计CAPM模型

#### 风险分析

## 聚宽平台的使用

### 聚宽SDK、Python API

申请本地数据

```python
from jqdatasdk import *
auth("name","password")
```

#### 价格数据

get_price

#### 财务数据

get_fundamentals

#### 收益率计算

pct_change().dropna()

### 聚宽在线平台

#### 新建策略

策略研究-->策略列表-->新建策略-->股票策略-->修改代码-->设定回测起止时间和初始资金-->设定交易频率

#### 运行回测

## 量化交易策略开发案例

### 聚宽编程框架

#### 启动

> Initialize()
>
> 初始化策略，设置交易成本、滑点（为了保证成交，在卖出时会略低于当前股价，买入时略高于当前股价）等，启动交易实时监测函数run_daily

#### 开盘前

> run_daily(pl_before_market_open,time='before_open')
>
> 每个交易日开盘前，自动调用pl_before_market_open函数，准备策略需要的数据

#### 盘中

> run_daily(pl_trade,time='every_bar')
>
> 根据聚宽界面上设定的交易频率，盘中自动调用pl_trade函数，处理交易逻辑

#### 收盘后

> run_daily(pl_after_market_close,time='after_close')
>
> 每个交易日收盘后，自动调用pl_after_market_close函数

### 如何选择交易标的-股票池

#### 引入

买上证50中，最近突破5日均线的股票-->2017年时上证50的好年份。突破5日移动均线说明近期发力上涨-->从优质股票的集合中，选择近期开始发力上涨的股票

#### 实例

低估值

> PE（市盈率）：0~30、容量：100、再平衡周期（更新股票池）：10个交易日

小市值低估值

> PE：0~30、市值：10亿 ~ 100亿、容量：100、再平衡周期：10个交易日

小市值低估值高质量

> PE：0~30、市值：10亿 ~ 100亿、ROE（净资产收益率）：10%~40%、容量：100、再平衡周期：10个交易日

### 如何选择交易时机-择时信号

#### 技术指标

均线型

> 反映一段时间内的平均成本
>
> 具有一定的压力或支持作用
>
> MA、EXPMA

趋势型

> 适用于趋势类的行情
>
> 检测趋势的启动、延续，还有可能的转折
>
> MACD、SAR、ASI、DMI

摆动型

> 适用于震荡类的行情
>
> 检测超买超卖、波动走势的可能转折点
>
> KDJ、RSI、CCI、WR、BOLL

能量型

> 度量涨跌的力度，预示价格位移的可持续性
>
> 依据是“量在价先，量价配合”
>
> OBV、VOL、VR

#### 均线交叉

金叉

> 短时均线上穿长时均线。买入信号。
>
> 均线都是用之前的数据计算的，留意“穿过”的条件。

死叉

> 短时均线下穿长时均线。卖出信号



